
    window.onscroll = function() {myFunction()};
    function myFunction() {
      var winScroll = document.body.scrollTop | document.documentElement.scrollTop;
      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      var scrolled = (winScroll / height) * 100;
      document.getElementById("myBar").style.width = scrolled + "%";
    }
    
    
    (function() {    
  var win = window;
  var doc = win.document;
  var bod = doc.body;
  var cls = bod.classList;
  var sto = localStorage;

  var pref_key = 'dark_mode_pref';
  var pref_on = 'true';
  var pref_off = 'false';
  var pref = sto.getItem(pref_key);

    var toggle = doc.querySelector('.dark-mode-toggle');
  
    var dark = false;
  
    var cls_light = 'light';
    var cls_dark = 'dark';
  
    var activateTheme = function(theme) {
      cls.remove(cls_light, cls_dark);
      cls.add(theme);
      dark = (theme == cls_dark ? true : false);
    };
  
    if (pref === pref_on) activateTheme(cls_dark);
    if (pref === pref_off) activateTheme(cls_light);
  
    if (!pref) {
      var prefers_dark = '(prefers-color-scheme: dark)';
      var prefers_light = '(prefers-color-scheme: light)';
  
      if (win.matchMedia(prefers_dark).matches)
        activateTheme(cls_dark);
      else
        activateTheme(cls_light);
  
      win.matchMedia(prefers_dark).addListener(function(e) { if (e.matches) activateTheme(cls_dark); });
      win.matchMedia(prefers_light).addListener(function(e) { if (e.matches) activateTheme(cls_light); });
    }
  
    if (toggle) {
      toggle.style.visibility = 'visible';
  
      toggle.addEventListener('click', function() {
        if (!dark) {
          activateTheme(cls_dark);
          sto.setItem(pref_key, pref_on);
        } else {
          activateTheme(cls_light);
          sto.setItem(pref_key, pref_off);
        }
      }, true);
    }
  })();
  